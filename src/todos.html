<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8">
    <title>Vue Todo Tutorial</title>
    <style>
        .empty {
            border-color: red;
        }
        .completed {
            text-decoration: line-through;
        }
    </style>
</head>
<body>
<div id="app">
    <input type="text" placeholder="Add todo" v-bind:class="{empty: !count}"
           v-model="new_todo" v-on:keyup.enter="addTodo">
    <span v-if="!count" style="color: red">Please Input Your Task.</span>

    <ul>
        <li v-for='todo in todos' :key='todo.id'>
            <span v-bind:class="{completed: todo.completed}">{{ todo.title }}</span>
            <input v-if="!todo.completed" type="button" value="Mark as Done" v-on:click="markAsCompleted(todo)" >
            <input v-if="todo.completed" type="button" value="Mark as Todo" v-on:click="markAsCompleted(todo)" >
            <input type="button" value="Delete" v-on:click="deleteTodo(todo)">
            <input type="text" value="Edit"/>
        </li>
    </ul>
    <div v-if="deleted_todo.length">
        <br>
        <input type="button" value="Undo" v-on:click="restoreTodo"/>
    </div>

</div>
</body>
<script src="https://cdn.bootcss.com/vue/2.5.16/vue.js"></script>
<script>
    let id = 0;
    var app = new Vue({
        el: '#app',
        data: function () {
            return {
                todos: [],
                new_todo: '',
                completed: false,
                deleted_todo: []
            }
        },
        methods: {
            send: function () {
                if (this.value.length > 0) {
                    alert('发送成功！');
                    this.value = ''
                }else{
                    alert('Please input sth before submitting.')
                }
            },
            addTodo: function () {
                if (this.new_todo.length > 0) {
                    this.todos.push({id: id++, title: this.new_todo, completed: false});
                }

            },
            markAsCompleted: function (todo) {
                // console.log(todo)
                todo.completed = !todo.completed
            },
            deleteTodo: function (todo) {
                // position = this.todos.indexOf(todo)
                // console.log(todo)
                this.deleted_todo.push(todo)

                this.todos.splice(todo.id, 1)

            },
            restoreTodo: function () {
                let res = this.deleted_todo.pop();
                // console.log(res);
                this.todos.splice(res.id, 0, res);
            }
        },
        computed: {
            count: function () {
                return this.new_todo.length
            }
        }
    })
</script>
</html>

